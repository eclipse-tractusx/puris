meta {
  name: 4-Retire Agreement by id
  type: http
  seq: 1
  tags: [
    admin
  ]
}

post {
  url: {{SUPPLIER_EDC}}/{{MANAGEMENT_PATH}}/v3/contractagreements/retirements
  body: json
  auth: apikey
}

auth:apikey {
  key: X-API-KEY
  value: {{SUPPLIER_EDC_API_KEY}}
  placement: header
}

body:json {
  {
    "@context": {
      "tx": "https://w3id.org/tractusx/v0.0.1/ns/",
      "edc": "https://w3id.org/edc/v0.0.1/ns/"
    },
    "edc:agreementId": "{{DTR_CONTRACT_AGREEMENT_ID}}",
    "tx:reason": "This contract has been retired by PURIS FOSS due to switching to another less restrictive policy scheme."
  }
}

tests {
  test("Status code is 204", function () {
      expect(res.getStatus()).to.equal(204);
  });
}
